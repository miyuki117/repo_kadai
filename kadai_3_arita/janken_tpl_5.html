<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<!-- <meta name="viewport" content="width=device-width">
  -->
<meta name=”viewport” content=”width = device-width,initial-scale=1.0″>

<script src="js/jquery-2.1.3.min.js"></script>
<link rel="stylesheet" href="css/sample.css">
<title>じゃんけん</title>

</head>

<body>

   

<header>
  <h1>じゃんけんアプリ</h1>
  
  <div class="annaunce">
   <ul>
      <li><ルール></li>
      <li>1Playに1ポイント消費</li>
      <li>「勝ち」は2ポイント、「引き分け」は1ポイント獲得</li>
      <li>「負け」は２ポイント消費</li>
      <li>※５ポイント以上ないとゲームは続けられないよ！</li>
   </ul>
   <div>現在のポイント数：「<span id="point">10</span>ポイント」</div>

  </div>

  <!-- <button>PLAY</button> -->


 
</header>

<main>
   <div class="janken">
      <p>好きな手を選んでね</p>
      <ul>
      <li id="gu_btn"><img src="./img/gu_2.png" alt=""></li>
      <li id="cho_btn"><img src="./img/cho_2.png" alt=""></li>
      <li id="par_btn"><img src="./img/pa_2.png" alt=""></li>
      </ul>
      <!-- 結果ボタン押下後 -->
      <div id="result"  class="hidden">

         <!-- pcの結果テキスト -->
         <div id="pc_hands"></div>
         <!-- 勝負の結果イラスト -->
         <div id="img_2"></div>
         <!-- 増減したポイント数 -->
          <div id="result_point"></div>
   
      </div>
 </div>

  <!-- <div class="visual">  -->



    <!-- 結果ボタン -->
   <div class="btn" >
      <button id="result_btn"><span id ="btn_name">結果を見る</span></button>
   </div> 

</main>

<footer>  
</footer>

<script>
//じゃんけん用のSCRIPTを書いてください

let a =0;
let i = 10; //ポイント数
let j = 0; //勝った回数
let k =0; //結果イラスト
let l =0; //コンピューターの結果
let m =0; //増減のポイント数



 $("#gu_btn").on ("click",function(){
 a =1 
 action();
})
$("#cho_btn").on ("click",function(){
 a =2 
 action();
})
$("#pa_btn").on ("click",function(){
 action();
})


function action(){

 i = i-1;
const r =Math.random()*3; //「3」を掛けることで、小数点繰り上げたときに数字が1～5になる
const n = Math.ceil(r); //繰り上げ0.01→１を「n」に渡す
console.log(n);
$("#btn_name").html("結果を見る");


if(i>=5){

// 勝ち
if(n == 1){
   i = i + 2; //勝ったので２ポイント獲得
   j = j+ 1; //勝ち数１追加
   k ='<img src="./img/win.png">';
   m= '2ポイント追加';

   if(a==1){
      // ユーザーはグー
      l ="コンピューターの出した手は「チョキ」"
   }
   if(a==2){
      // ユーザーはチョキ
      l ="コンピューターの出した手は「パー」"
   }
   if(a==3){
      // ユーザーはパー
      l ="コンピューターの出した手は「グー」"
   }
}

//負け
if(n == 2){
   i = i -2; //負けなので２ポイント減る
   k ='<img src="./img/lose.png">';
   m= '2ポイント減る';

   if(a==1){
      // ユーザーはグー
      l ="コンピューターの出した手は「パー」"
   }

   if(a==2){
      // ユーザーはチョキ
      l ="コンピューターの出した手は「グー」"
   }

   if(a==3){
      // ユーザーはパー
      l ="コンピューターの出した手は「チョキ」"
   }
}

//引き分け
if(n == 3){
   i = i + 1; //相子なので２ポイント獲得
   k ='<img src="./img/draw.png">';
   m= '1ポイント追加';

   if(a==1){
      // ユーザーはグー
      l ="コンピューターの出した手は「グー」"
   }
   if(a==2){
      // ユーザーはチョキ
      l ="コンピューターの出した手は「チョキ」"
   }
   if(a==3){
      // ユーザーはパー
      l ="コンピューターの出した手は「パー」"
   }
}

}else{
   alert("ポイントが足りません")
   alert("ポイントをチャージしますか？")
   i =i+10;
   $("#point").html(i);
}


$("#point").html(i);

}


$("#result_btn").on ("click",function(){

   $("#pc_hands").html(l);
   $('#img_2').fadeOut(3000); //再度表示できるようにしておかなくてはいけない
   $('#img_2').fadeIn(3000); 
   $("#img_2").html(k); 
   $("#img_2").html(k);   
   $("#result_point").html(m);
   $("#point").html(i);


})

// 結果ボタンを押したら表示にする
const button = document.querySelector('#result_btn');
button.addEventListener('click',ToggleDisplay);

function ToggleDisplay(){
   const result =document.querySelector('#result');
   result.classList.toggle('hidden');
   result.classList.toggle('result');

}



 


    
    
    
    
    
    
    

</script>
</body>
</html>
